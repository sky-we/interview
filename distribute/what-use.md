# 什么是分布式

分布式架构一种软件架构模式 将系统中的各个组件分布在不同的物理或虚拟节点上，可以是多个进程、服务或模块。这些组件可以在不同的机器上运行，通过远程调用、消息传递等方式进行交互，共同完成系统的功能和业务需求，提高系统的可伸缩性、可靠性和性能。
相对于之前的单体应用而言，单体应用的缺陷有项目迭代，可拓展性和可用性差等问题
首先是**项目迭代**很慢：
1 代码耦合到一起，并且代码越来越复杂，对于开发人员来说，代码BUG多，单元测试、功能自测困难，并且代码合在一起开发人员合代码的时候会造成很多冲突，解决冲突也可能会引入新的BUG，总的来说开发效率低下
2 对于运维人员来说，单体应用故障的时候，难以快速的定位是哪个模块出的问题，并且单体应用无法保证应用的高可用性
3 对于测试人员来说，每次上一个新功能，都需要完整回归测试，测试成本高
4 对于部署人员来说，应用规模变大，启动和部署时间增加
总的来说 随着应用的扩张，单体应用迭代和发布会更加频繁，而单体应用的软件架构会影响整体的项目迭代进度

**拓展性差**
资源浪费，当单体应用遇到性能瓶颈的时候，只能通过增加服务器实例来拓展 而不是针对某一个模块进行拓展，这样那些不需要拓展的模块额外占用了服务器的资源
当某一个模块需要拓展的时候，只能整体拓展，其他业务可能也需要配合修改

**可用性差**

系统的各模块耦合到一起，单点故障就会导致整体功能不可用


# 分布式解决了哪些问题
解决了单体应用迭代缓慢、拓展性差、可用性差的问题；
**项目迭代**
开发只关注本模块代码，代码量少，单元测试、功能测试都比较方便，代码质量可以提升，可以更快地发布自己的需求代码，甚至可以更容易的进行微重构来提升代码质量。
可以根据业务需求选择最合适的技术，而不受限于单一技术栈，提高技术灵活性和效率。例如，底层的存储服务往往对性能有要求，就可以使用c++技术栈，类似web服务可以用Python来实现接口 ，需要对nginx进一步配置可以使用lua脚本
测试可能不用对整个应用进行迭代测试，有时候只需要测试本模块即可。
运维：某个服务发生故障，其他服务仍可以继续运行。其次定位问题变得比之前的单体应用更简单。
部署：快速部署新功能或修复 bug，减少整体部署的复杂性，缩短发布周期，而且当有服务需要拓展时，不用像之前那样整个应用进行拓展

**拓展性**：分布式架构通过将系统拆分为多个独立的微服务，每个微服务可以根据实际需求独立扩展。这样可以有效地利用资源，避免对整个系统进行扩展
**可用性**：
负载均衡分摊服务器的流量，如果有一台server挂了也不影响其他server继续提供服务。
冗余与副本：数据和服务会复制到多个节点，确保即使某个节点宕机，其他节点可以继续工作，数据库的主从复制，服务被部署到多个节点
心跳监控与故障转移 ZooKeeper 发现某个服务不可用，它会自动切换到备用服务上
分区容错，分布式系统的设计往往要考虑由于网络故障带来的分布式事务的问题，会牺牲一部分一致性来保证可用性。一些手段比如说2PC 3PC 补偿事务，最终一致性、分布式锁、可靠消息和事件驱动等
消息队列机制，将生产者与消费者解耦，即便生产者有异常了，消费者也能继续消费
熔断：当负载过高，服务会自动降级，只提供一些基础功能，防止服务因为失败反复重试导致资源浪费和系统崩溃
多活架构：分布式系统会采用多中心多节点来提供服务，避免单点故障

**性能提升**：
负载均衡：让系统可以处理更多的请求
分布式缓存：将常用数据都缓存在redis中
消息队列：对于不需要实时处理的任务，将任务放到消息队列里面，
服务拆分与水平拓展：将系统拆分为多个微服务，每个微服务处理不同的功能，都可以独立拓展和优化，水平拓展也不会造成像单体应用那样造成资源浪费
数据库分库分表，提升系统整体的性能指标